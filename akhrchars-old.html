<!DOCTYPE html>
<html lang="zh-CN" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Arknights Recruitment Calculator</title>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css'>
    <link rel="stylesheet" href="css/multilingual.css">
    <script src='https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js'></script>
    <script src="js/multilingual.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159317757-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-159317757-1');
    </script>
</head>
<body>
    <button class="btn btn-sm btn-primary goToTag" style="position:fixed;bottom:15px ;right: 0px;size:70px 70px;padding: 10px;z-index: 10000" id="to-tag" type="button">^ </button>
    <nav id="aknav" class="navbar fixed-top navbar-expand-xl navbar-dark bg-dark" style="background-image: linear-gradient(#222222ff 70%,#222222ff , #111111aa );">
            <img src="https://raw.githubusercontent.com/Aceship/Arknight-Images/main/factions/logo_rhodes.png" width="40" height="40" style="transform:scale(1.2,1.2)translate(-8px,1px)"class="d-inline-block align-top" alt="">
            <a class="navbar-brand" href="#" translate-id="topbar-1">Arknights Toolbox</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="展开">
                <span class="navbar-toggler-icon"></span>
            </button>
    </nav>
    <div id='acedonate'></div>
    <div style="padding-bottom:50px"></div>
    <div class="container" style="margin:auto;max-width:1000px;">
        <div class="col-12 alert alert-dark mt-3" role="alert">
            <center><button type="button" class="btn btn-success col-12 align-self-center text-center" disabled>Select the tags :</button></center>
            <div id="box-tags">
                <table >
                    <button style="width: 60px;" type="button" class="btn btn-sm btn-success my-1" id="btn-all">All</button>
                    <button style="width: 60px; margin-left: 2px;" type="button" class="btn btn-sm btn-danger my-1" id="btn-clear">Clear</button>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                        <td> <button style="width:100%"  type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Qualification</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>资质</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                        <td width = 100%>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Newbie">新手</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Senior">资深干员</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Advanced Senior">高级资深干员</button></td>
                    </tr>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                        <td><button style="width:100%" type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Position</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>位置</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Ranged">远程位</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Melee">近战位</button></td>
                    </tr>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                        <td><button style="width:100%" type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Gender</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>性别</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Male">男性干员</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Female">女性干员</button></td>
                    </tr>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                        <td><button style="width:100%" type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Class</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>种类</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Vanguard">先锋</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Sniper">狙击</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Medic">医疗</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Caster">术师</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Guard">近卫</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Defender">重装</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Support">辅助</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Specialist">特种</button></td>
                    </tr>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                            <td><button style="width:100%" type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Affix</button></td>
                            <td><button type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>词缀</button></td>
                            <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                            <td><button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Healing">治疗</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Support">支援</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="DPS">输出</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Splash">群攻</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Slow">减速</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Survival">生存</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Protection">防护</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Debuffer">削弱</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Displacement">位移</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Crowd Control">控场</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Burst">爆发</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Summoner">召唤</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Quick Resurrection">快速复活</button>
                                <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-tag my-1" data-toggle="tooltip" data-placement="top" title="Cost Recovery">费用回复</button></td>
                    </tr>
                    <tr>
                        <td colspan=4><hr class="my-1" /></td>
                    </tr>
                    <tr style="text-align:left;vertical-align:top;padding:0">
                        <td colspan=2><button style="width:100%" type="button" id="btn-calculate" class="btn btn-sm btn-info my-1" disabled>Filter Rarity</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-secondary my-1" disabled>-</button></td>
                        <td><button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="all" id="opt-all">ALL</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="6">6★</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="5">5★</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="4">4★</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="3">3★</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="2">2★</button>
                            <button type="button" id="btn-calculate" class="btn btn-sm btn-primary btn-opt my-1" opt-id="1">1★</button></td>
                    </tr>
                </table>
            </div>
            <hr class="my-1" />
            <button type="button" class="btn btn-sm btn-success my-1" id="btn-all">全选</button>
            <button type="button" class="btn btn-sm btn-danger my-1" id="btn-clear">清空</button>
        </div>

        <div class="row col-12">
            <div class="col-8">
                <button class="btn btn-success col-12 align-self-center text-center" id="btn-calculate">Calculate</button>
            </div>
            <div class="col-4">
                <button class="btn btn-danger col-12 align-self-center text-center" id="btn-clear">Clear</button>
            </div>
        </div>
        <table class="table table-striped table-hover my-3" id="table-chars">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Operator</th>
                    <th scope="col">Class</th>
                    <th scope="col">Tags</th>
                    <th scope="col">Publicity</th>
                </tr>
            </thead>
            <tbody id="tbody-chars"></tbody>
        </table>
        <hr />
        <div class="row col-12 tutorial">
            <div class="col-12 text-left">
                <p>Instructions：</p>
                <p>1. Select the tag you need to query；</p>
                <p>2. The operators will be automatically filtered.</p>
            </div>
        </div>
    </div>

    <div class="row col-12 ak-footer">
        <div class="col-12 text-center">
            <p>Forked from <a href = "https://graueneko.github.io/akhr.html">grauneko web</a></p>
        <div class="col-12 text-center"></div>
            <p>Last update: 12 May 2019, <a href="https://github.com/Aceship/AN-EN-Tags/issues">Contact</a></p>
            <p>
                Data source:
                <a href="http://wiki.joyme.com/arknights/%E5%B9%B2%E5%91%98%E6%95%B0%E6%8D%AE%E8%A1%A8">Arknights Wiki (CN)</a>
            </p>
            <p>Powered by GraueNeko, Aceship, Faryzal2020</p>
        </div>
    </div>
    <script src="./js/aknav.js"></script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
            let all_chars = {};
            let colors = { 1: "active", 2: "light", 3: "success", 4: "info", 5: "warning", 6: "danger" };
            $.getJSON("akhr.json", function (data) {
                let char_html = [];
                data.sort(function (a, b) {
                    return a.level > b.level ? -1 : (a.level < b.level ? 1 : 0);
                });
                $.each(data, function (_, char) {
                    char.tags.push(char.sex);
                    all_chars[char.name] = { 'level': char.level, 'tags': char.tags };
                    char_html.push("<tr class='table-" + colors[char.level] + " tr-char'><td>" + char.name + "</td><td>" + char.type + "</td><td>" + char.tags.join("，") + "</td><td>" + (char.hidden ? "No" : "Yes") + "</td></tr>");
                });
                $("#tbody-chars").html(char_html.join("\n"));
            });

            $(document).on("click", ".btn-tag", function () {
                $(this).toggleClass("btn-primary btn-secondary");
                let checked = $(this).hasClass("btn-primary");
                let tag = $(this).attr('data-original-title');
                console.log(tag);
                if (checked) {
                    $(".tr-char:contains('" + tag + "')").show();
                } else {
                    $(".tr-char:contains('" + tag + "')").hide();
                }
            });
            $(document).on("click", ".btn-opt", function () {
                $(this).toggleClass("btn-primary btn-secondary");
                let checked = $(this).hasClass("btn-primary");
                if ($(this).attr("id") === "opt-all") {
                    $(".btn-opt").removeClass("btn-primary btn-secondary").addClass(
                        checked ? "btn-primary" : "btn-secondary"
                    );
                    if ($('#opt-all').hasClass('btn-secondary')) {
                        $('.tr-char').hide();
                    } else {
                        $('.tr-char').show();
                    }
                } else {
                    if ($("#opt-all").hasClass("btn-primary")) {
                        $("#opt-all").toggleClass("btn-primary btn-secondary");
                    } else {
                        let checkedCount = 0;
                        $(".btn-opt").each(function (_, __) {
                            if ($(this).attr("id") === "opt-all") return;
                            if ($(this).hasClass("btn-primary")) checkedCount++;
                        });
                        if (checked) {
                            $(".table-" + colors[$(this).attr("opt-id")]).show();
                        } else {
                            $(".table-" + colors[$(this).attr("opt-id")]).hide();
                        }
                        if (checkedCount === 6) $("#opt-all").toggleClass("btn-primary btn-secondary");
                    }
                }
            });
            $(document).on('click', '#btn-clear', function () {
                $('.tr-char').hide();
                $('.btn-tag').removeClass('btn-primary').addClass('btn-secondary');
                $('.btn-opt').removeClass('btn-primary').addClass('btn-secondary');
            });
            $(document).on('click', '#btn-all', function () {
                $('.tr-char').show();
                $('.btn-tag').removeClass('btn-secondary').addClass('btn-primary');
                $('.btn-opt').removeClass('btn-secondary').addClass('btn-primary');
            });
        });
    </script>
</body>
</html>